<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Credit Card Parser</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
  <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
  <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
</head>
<body>
  <div id="root"></div>
  
  <script type="text/babel">
    const { useState } = React;

    // Icons as inline SVG
    const Upload = ({className}) => (
      <svg className={className} xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round">
        <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"/><polyline points="17 8 12 3 7 8"/><line x1="12" x2="12" y1="3" y2="15"/>
      </svg>
    );

    const FileText = ({className}) => (
      <svg className={className} xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round">
        <path d="M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z"/><polyline points="14 2 14 8 20 8"/>
      </svg>
    );

    const CreditCard = ({className}) => (
      <svg className={className} xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round">
        <rect width="20" height="14" x="2" y="5" rx="2"/><line x1="2" x2="22" y1="10" y2="10"/>
      </svg>
    );

    const Calendar = ({className}) => (
      <svg className={className} xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round">
        <rect width="18" height="18" x="3" y="4" rx="2"/><line x1="16" x2="16" y1="2" y2="6"/><line x1="8" x2="8" y1="2" y2="6"/><line x1="3" x2="21" y1="10" y2="10"/>
      </svg>
    );

    const DollarSign = ({className}) => (
      <svg className={className} xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round">
        <line x1="12" x2="12" y1="2" y2="22"/><path d="M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6"/>
      </svg>
    );

    const Hash = ({className}) => (
      <svg className={className} xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round">
        <line x1="4" x2="20" y1="9" y2="9"/><line x1="4" x2="20" y1="15" y2="15"/><line x1="10" x2="8" y1="3" y2="21"/><line x1="16" x2="14" y1="3" y2="21"/>
      </svg>
    );

    const AlertCircle = ({className}) => (
      <svg className={className} xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round">
        <circle cx="12" cy="12" r="10"/><line x1="12" x2="12" y1="8" y2="12"/><line x1="12" x2="12.01" y1="16" y2="16"/>
      </svg>
    );

    const CheckCircle = ({className}) => (
      <svg className={className} xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round">
        <path d="M22 11.08V12a10 10 0 1 1-5.93-9.14"/><polyline points="22 4 12 14.01 9 11.01"/>
      </svg>
    );

    const Zap = ({className}) => (
      <svg className={className} xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round">
        <polygon points="13 2 3 14 12 14 11 22 21 10 12 10 13 2"/>
      </svg>
    );

    const CreditCardParser = () => {
      const [file, setFile] = useState(null);
      const [parsing, setParsing] = useState(false);
      const [results, setResults] = useState(null);
      const [error, setError] = useState(null);
      const [loadingPdf, setLoadingPdf] = useState(false);
      const [showProviders, setShowProviders] = useState(false);

      const parseStatement = (text) => {
        let extractedData = {
          provider: null,
          cardVariant: null,
          lastFourDigits: null,
          billingCycle: null,
          paymentDueDate: null,
          totalBalance: null
        };

        const providerPatterns = [
          { pattern: /visa\s+(credit|debit|card)/i, name: 'Visa', variant: 'Visa Credit Card' },
          { pattern: /visa/i, name: 'Visa', variant: 'Visa Card' },
          { pattern: /mastercard/i, name: 'Mastercard', variant: 'Mastercard' },
          { pattern: /american\s+express|amex/i, name: 'American Express', variant: 'American Express Card' },
          { pattern: /jpmorgan\s+chase|chase\s+bank|chase/i, name: 'Chase', variant: 'Chase Card' },
          { pattern: /citi(bank|card)?/i, name: 'Citibank', variant: 'Citi Card' },
          { pattern: /discover/i, name: 'Discover', variant: 'Discover Card' },
          { pattern: /capital\s+one/i, name: 'Capital One', variant: 'Capital One Card' },
          { pattern: /bank\s+of\s+america|bofa/i, name: 'Bank of America', variant: 'Bank of America Card' },
          { pattern: /wells\s+fargo/i, name: 'Wells Fargo', variant: 'Wells Fargo Card' },
          { pattern: /u\.?s\.?\s+bank/i, name: 'US Bank', variant: 'US Bank Card' },
          { pattern: /barclays/i, name: 'Barclays', variant: 'Barclays Card' },
          { pattern: /hsbc/i, name: 'HSBC', variant: 'HSBC Card' },
          { pattern: /pnc/i, name: 'PNC Bank', variant: 'PNC Card' },
          { pattern: /td\s+bank/i, name: 'TD Bank', variant: 'TD Bank Card' },
          { pattern: /synchrony/i, name: 'Synchrony Bank', variant: 'Synchrony Card' },
        ];

        for (const provider of providerPatterns) {
          if (provider.pattern.test(text)) {
            extractedData.provider = provider.name;
            extractedData.cardVariant = provider.variant;
            break;
          }
        }

        const digitsPatterns = [
          /account\s+number[:\s]+[*x]+\s*[*x]+\s*[*x]+\s*(\d{4})/i,
          /\*{4,}\s*\*{4,}\s*\*{4,}\s*(\d{4})/,
          /(?:ending\s+in|ends\s+in)[:\s]*(\d{4})/i,
          /[xX]{4,}-(\d{4})/,
        ];

        for (const pattern of digitsPatterns) {
          const match = text.match(pattern);
          if (match && match[1]) {
            extractedData.lastFourDigits = match[1];
            break;
          }
        }

        const billingPatterns = [
          /statement\s+period[:\s]+([A-Za-z]+\s+\d{1,2},?\s+\d{4})\s*[-‚Äìto]+\s*([A-Za-z]+\s+\d{1,2},?\s+\d{4})/i,
          /billing\s+period[:\s]+(\d{1,2}\/\d{1,2}\/\d{2,4})\s*[-‚Äìto]+\s*(\d{1,2}\/\d{1,2}\/\d{2,4})/i,
        ];

        for (const pattern of billingPatterns) {
          const match = text.match(pattern);
          if (match && match[2]) {
            extractedData.billingCycle = `${match[1]} - ${match[2]}`;
            break;
          }
        }

        const dueDatePatterns = [
          /payment\s+due\s+date[:\s]+([A-Za-z]+\s+\d{1,2},?\s+\d{4})/i,
          /payment\s+due\s+date[:\s]+(\d{1,2}\/\d{1,2}\/\d{2,4})/i,
          /due\s+date[:\s]+([A-Za-z]+\s+\d{1,2},?\s+\d{4})/i,
        ];

        for (const pattern of dueDatePatterns) {
          const match = text.match(pattern);
          if (match && match[1]) {
            extractedData.paymentDueDate = match[1];
            break;
          }
        }

        const balancePatterns = [
          /new\s+balance[:\s]+\$?\s*([\d,]+\.\d{2})/i,
          /total\s+balance[:\s]+\$?\s*([\d,]+\.\d{2})/i,
          /current\s+balance[:\s]+\$?\s*([\d,]+\.\d{2})/i,
        ];

        for (const pattern of balancePatterns) {
          const match = text.match(pattern);
          if (match && match[1]) {
            extractedData.totalBalance = `$${match[1]}`;
            break;
          }
        }

        return extractedData;
      };

      const loadPdfJsLib = async () => {
        if (window.pdfjsLib) return;
        
        return new Promise((resolve, reject) => {
          const script = document.createElement('script');
          script.src = 'https://cdnjs.cloudflare.com/ajax/libs/pdf.js/3.11.174/pdf.min.js';
          script.onload = () => {
            window.pdfjsLib.GlobalWorkerOptions.workerSrc = 
              'https://cdnjs.cloudflare.com/ajax/libs/pdf.js/3.11.174/pdf.worker.min.js';
            resolve();
          };
          script.onerror = reject;
          document.head.appendChild(script);
        });
      };

      const extractTextFromPdf = async (arrayBuffer) => {
        await loadPdfJsLib();
        const pdf = await window.pdfjsLib.getDocument({ data: arrayBuffer }).promise;
        let fullText = '';

        for (let i = 1; i <= pdf.numPages; i++) {
          const page = await pdf.getPage(i);
          const textContent = await page.getTextContent();
          const pageText = textContent.items.map(item => item.str).join(' ');
          fullText += pageText + '\n';
        }

        return fullText;
      };

      const handleFileUpload = async (e) => {
        const uploadedFile = e.target.files[0];
        if (!uploadedFile) return;

        setFile(uploadedFile);
        setError(null);
        setParsing(true);
        setResults(null);

        try {
          let text = '';
          
          if (uploadedFile.type === 'application/pdf' || uploadedFile.name.toLowerCase().endsWith('.pdf')) {
            setLoadingPdf(true);
            const arrayBuffer = await uploadedFile.arrayBuffer();
            text = await extractTextFromPdf(arrayBuffer);
            setLoadingPdf(false);
          } else {
            const reader = new FileReader();
            text = await new Promise((resolve, reject) => {
              reader.onload = (event) => resolve(event.target.result);
              reader.onerror = () => reject(new Error('Failed to read file'));
              reader.readAsText(uploadedFile);
            });
          }
          
          if (!text || text.trim().length === 0) {
            throw new Error('No text content found in the file');
          }

          const parsedData = parseStatement(text);
          
          setTimeout(() => {
            setResults(parsedData);
            setParsing(false);
          }, 500);
        } catch (err) {
          setError(`Error processing file: ${err.message}`);
          setParsing(false);
          setLoadingPdf(false);
        }
      };

      return (
        <div className="min-h-screen bg-gradient-to-br from-stone-100 via-amber-50 to-neutral-100 p-4 md:p-8">
          <div className="max-w-7xl mx-auto">
            <div className="bg-white rounded-xl shadow-xl p-6 md:p-8 mb-6 border border-amber-200">
              <div className="flex items-center gap-3 mb-4">
                <div className="p-3 bg-amber-100 rounded-lg">
                  <CreditCard className="w-8 h-8 text-amber-800" />
                </div>
                <div>
                  <h1 className="text-2xl md:text-3xl font-bold text-neutral-800">Universal Credit Card PDF Parser</h1>
                  <p className="text-sm text-neutral-600">Instantly extract data from ANY credit card statement PDF</p>
                </div>
              </div>
              
              <div className="flex flex-wrap gap-2">
                <span className="inline-flex items-center gap-1 px-3 py-1 bg-emerald-100 text-emerald-800 rounded-full text-xs font-medium">
                  <Zap className="w-3 h-3" /> PDF Support
                </span>
                <span className="inline-flex items-center gap-1 px-3 py-1 bg-amber-100 text-amber-800 rounded-full text-xs font-medium">
                  <CheckCircle className="w-3 h-3" /> 20+ Providers
                </span>
                <span className="inline-flex items-center gap-1 px-3 py-1 bg-stone-200 text-stone-800 rounded-full text-xs font-medium">
                  <CheckCircle className="w-3 h-3" /> Smart Extraction
                </span>
              </div>
            </div>

            <div className="bg-white rounded-xl shadow-xl p-6 md:p-8 mb-6 border border-amber-200">
              <div className="flex items-center gap-2 mb-4">
                <Upload className="w-6 h-6 text-amber-800" />
                <h2 className="text-xl font-semibold text-neutral-800">Upload Credit Card Statement</h2>
              </div>
              
              <div className="mb-4 flex items-center justify-between p-4 bg-gradient-to-r from-amber-50 to-stone-100 border border-amber-300 rounded-lg">
                <h3 className="font-semibold text-amber-900">üè¶ Supports 20+ Major Providers</h3>
                <button
                  onClick={() => setShowProviders(!showProviders)}
                  className="px-4 py-2 bg-amber-700 text-white rounded-lg hover:bg-amber-800 transition-colors text-sm font-medium"
                >
                  {showProviders ? 'Hide List' : 'View List'}
                </button>
              </div>

              {showProviders && (
                <div className="mb-4 p-4 bg-white border border-amber-300 rounded-lg">
                  <div className="grid grid-cols-2 md:grid-cols-3 lg:grid-cols-5 gap-2 text-sm text-amber-900">
                    <div>‚úì Visa</div>
                    <div>‚úì Mastercard</div>
                    <div>‚úì American Express</div>
                    <div>‚úì Chase</div>
                    <div>‚úì Citibank</div>
                    <div>‚úì Discover</div>
                    <div>‚úì Capital One</div>
                    <div>‚úì Bank of America</div>
                    <div>‚úì Wells Fargo</div>
                    <div>‚úì US Bank</div>
                    <div>‚úì Barclays</div>
                    <div>‚úì HSBC</div>
                    <div>‚úì PNC Bank</div>
                    <div>‚úì TD Bank</div>
                    <div>‚úì Synchrony</div>
                    <div>‚úì And more...</div>
                  </div>
                </div>
              )}

              <label className="flex flex-col items-center justify-center w-full h-64 border-2 border-dashed border-amber-400 rounded-xl cursor-pointer hover:bg-amber-50 transition-colors">
                <div className="flex flex-col items-center justify-center pt-5 pb-6">
                  <Upload className="w-16 h-16 text-amber-600 mb-4" />
                  <p className="mb-2 text-lg font-semibold text-neutral-700">
                    Click to upload your statement
                  </p>
                  <p className="text-sm text-neutral-500 mb-2">or drag and drop</p>
                  <p className="text-xs text-neutral-400 text-center px-4">
                    Supports PDF (recommended) and TXT files
                  </p>
                  {file && !parsing && !results && (
                    <div className="mt-4 flex items-center gap-2 text-sm text-amber-800 bg-amber-100 px-4 py-2 rounded-lg">
                      <FileText className="w-5 h-5" />
                      <span className="font-medium">{file.name}</span>
                    </div>
                  )}
                </div>
                <input
                  type="file"
                  className="hidden"
                  accept=".pdf,.txt"
                  onChange={handleFileUpload}
                />
              </label>

              {(parsing || loadingPdf) && (
                <div className="mt-6 flex items-center justify-center gap-3 text-amber-800 bg-amber-50 p-6 rounded-lg border border-amber-200">
                  <div className="animate-spin rounded-full h-8 w-8 border-b-2 border-amber-800"></div>
                  <div>
                    <p className="font-semibold">
                      {loadingPdf ? 'Reading PDF...' : 'Parsing statement...'}
                    </p>
                    <p className="text-sm">
                      {loadingPdf ? 'Extracting text from PDF' : 'Analyzing 6 key data points'}
                    </p>
                  </div>
                </div>
              )}

              {error && (
                <div className="mt-6 flex items-start gap-3 p-4 bg-red-50 border border-red-200 rounded-lg">
                  <AlertCircle className="w-6 h-6 text-red-500 flex-shrink-0 mt-0.5" />
                  <div>
                    <p className="font-semibold text-red-900">Error Processing File</p>
                    <p className="text-sm text-red-700 mt-1">{error}</p>
                  </div>
                </div>
              )}
            </div>

            {results && (
              <div className="bg-white rounded-xl shadow-xl p-6 md:p-8 border border-amber-200">
                <div className="flex items-center gap-2 mb-6 pb-4 border-b border-amber-200">
                  <div className="p-2 bg-emerald-100 rounded-lg">
                    <CheckCircle className="w-6 h-6 text-emerald-700" />
                  </div>
                  <div>
                    <h2 className="text-xl font-semibold text-neutral-800">Extraction Complete!</h2>
                    <p className="text-sm text-neutral-600">Data extracted from {file?.name}</p>
                  </div>
                </div>

                <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-5">
                  <div className="p-6 bg-gradient-to-br from-amber-50 to-amber-100 rounded-xl border border-amber-300 shadow-sm">
                    <div className="flex items-center gap-2 mb-3">
                      <CreditCard className="w-5 h-5 text-amber-800" />
                      <span className="text-sm font-semibold text-amber-900 uppercase tracking-wide">Provider</span>
                    </div>
                    <p className="text-2xl font-bold text-amber-800">
                      {results.provider || 'Not detected'}
                    </p>
                  </div>

                  <div className="p-6 bg-gradient-to-br from-stone-100 to-stone-200 rounded-xl border border-stone-300 shadow-sm">
                    <div className="flex items-center gap-2 mb-3">
                      <CreditCard className="w-5 h-5 text-stone-800" />
                      <span className="text-sm font-semibold text-stone-900 uppercase tracking-wide">Card Variant</span>
                    </div>
                    <p className="text-xl font-bold text-stone-800">
                      {results.cardVariant || 'Generic Card'}
                    </p>
                  </div>

                  <div className="p-6 bg-gradient-to-br from-emerald-50 to-emerald-100 rounded-xl border border-emerald-300 shadow-sm">
                    <div className="flex items-center gap-2 mb-3">
                      <Hash className="w-5 h-5 text-emerald-800" />
                      <span className="text-sm font-semibold text-emerald-900 uppercase tracking-wide">Last 4 Digits</span>
                    </div>
                    <p className="text-4xl font-bold text-emerald-800 tracking-wider">
                      {results.lastFourDigits || 'Not found'}
                    </p>
                  </div>

                  <div className="p-6 bg-gradient-to-br from-orange-50 to-orange-100 rounded-xl border border-orange-300 shadow-sm md:col-span-2">
                    <div className="flex items-center gap-2 mb-3">
                      <Calendar className="w-5 h-5 text-orange-800" />
                      <span className="text-sm font-semibold text-orange-900 uppercase tracking-wide">Billing Cycle</span>
                    </div>
                    <p className="text-xl font-bold text-orange-800">
                      {results.billingCycle || 'Not found'}
                    </p>
                  </div>

                  <div className="p-6 bg-gradient-to-br from-red-50 to-red-100 rounded-xl border border-red-300 shadow-sm">
                    <div className="flex items-center gap-2 mb-3">
                      <Calendar className="w-5 h-5 text-red-800" />
                      <span className="text-sm font-semibold text-red-900 uppercase tracking-wide">Due Date</span>
                    </div>
                    <p className="text-xl font-bold text-red-800">
                      {results.paymentDueDate || 'Not found'}
                    </p>
                  </div>

                  <div className="p-6 bg-gradient-to-br from-emerald-100 to-emerald-200 rounded-xl border border-emerald-400 shadow-sm md:col-span-2 lg:col-span-3">
                    <div className="flex items-center gap-2 mb-3">
                      <DollarSign className="w-6 h-6 text-emerald-900" />
                      <span className="text-sm font-semibold text-emerald-900 uppercase tracking-wide">Total Balance</span>
                    </div>
                    <p className="text-5xl font-bold text-emerald-900">
                      {results.totalBalance || 'Not found'}
                    </p>
                  </div>
                </div>
              </div>
            )}

            <div className="mt-6 bg-gradient-to-r from-amber-50 to-stone-100 border border-amber-300 rounded-xl p-6">
              <h3 className="text-lg font-semibold mb-3 text-amber-900">Made by Jayesh Thakkar </h3>
              
            </div>
          </div>
        </div>
      );
    };

    const root = ReactDOM.createRoot(document.getElementById('root'));
    root.render(<CreditCardParser />);
  </script>
</body>
</html>